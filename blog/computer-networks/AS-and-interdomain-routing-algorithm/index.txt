2:"$Sreact.suspense"
3:I[1523,["137","static/chunks/137-7c01c277e0f0cc48.js","269","static/chunks/269-a28aad18182cd41e.js","614","static/chunks/614-0bac26ad143a75db.js","797","static/chunks/app/blog/%5B...slug%5D/page-c538284416fbde4d.js"],"BailoutToCSR"]
4:I[3124,["137","static/chunks/137-7c01c277e0f0cc48.js","269","static/chunks/269-a28aad18182cd41e.js","614","static/chunks/614-0bac26ad143a75db.js","797","static/chunks/app/blog/%5B...slug%5D/page-c538284416fbde4d.js"],"default"]
6:I[4707,[],""]
8:I[6423,[],""]
9:I[3483,["648","static/chunks/648-3ae006cfe07c9d94.js","768","static/chunks/app/blog/layout-a0ac16c7cad7b2d1.js"],"default",1]
a:I[5495,["137","static/chunks/137-7c01c277e0f0cc48.js","648","static/chunks/648-3ae006cfe07c9d94.js","185","static/chunks/app/layout-2f9a78561536bd6f.js"],"ThemeProvider"]
b:I[4491,["137","static/chunks/137-7c01c277e0f0cc48.js","648","static/chunks/648-3ae006cfe07c9d94.js","185","static/chunks/app/layout-2f9a78561536bd6f.js"],"LanguageProvider"]
c:I[1890,["137","static/chunks/137-7c01c277e0f0cc48.js","648","static/chunks/648-3ae006cfe07c9d94.js","185","static/chunks/app/layout-2f9a78561536bd6f.js"],"Header"]
5:T26cd,
## 인터넷 생태계의 구성 요소
오늘날의 인터넷은 단일 네트워크가 아니라 서로 연결된 여러 네트워크로 구성된 복잡한 생태계입니다.
이 생태계를 구성하는 주요 요소는 다음과 같습니다.

1. **인터넷 서비스 제공자 (ISP, Internet Service Provider)**
    
    ISP는 규모와 역할에 따라 세 가지 유형으로 나뉩니다.
    
    - **Access ISP (Tier-3)**: 최종 사용자에게 직접 인터넷 연결을 제공하는 소규모 ISP
    - **Regional ISP (Tier-2)**: 여러 access ISP를 모아 연결하며 중간 규모의 네트워크를 형성
    - **Global ISP (Tier-1)**: 전 세계에 걸쳐 **backbone 네트워크**를 운영하며, 약 10여 개의 대형 Tier-1 ISP가 존재합니다.
        작은 네트워크들은 주로 regional ISP나 access ISP를 통해 Tier-1 ISP에 연결됩니다.
    
2. **인터넷 교환 지점 (IXP, Internet Exchange Points)**
    
    IXP는 여러 네트워크(예를 들어 ISP와 CDN)가 물리적인 인프라를 통해 서로 연결되어 **트래픽을 로컬에서 교환할 수 있게 해주는 시설**입니다.
    2019년 기준 전 세계에 약 500여 개의 IXP가 존재합니다.

3. **콘텐츠 전송 네트워크 (CDN, Content Delivery Network)**

    CDN은 **콘텐츠 제공자가 최종 사용자에게 콘텐츠를 더 효율적으로 전달**하고, **연결 비용을 줄이기 위해** 구축한 네트워크입니다
    
    예를 들어, Google이나 Netflix와 같은 CDN은 전 세계에 분산된 다수의 데이터 센터와 수백 대의 서버를 보유하고 있습니다.
    
위와 같은 생태계는 기본적으로 **계층적 구조**를 띄고 있습니다.

예를 들어, 소규모 access ISP는 더 큰 regional ISP의 고객이 되며, regional ISP는 다시 Tier-1 ISP의 고객이 되는 식입니다.

각 계층의 네트워크들은 **같은 유형의 다른 네트워크와 경쟁**합니다. 예를 들어 Tier-1 ISP끼리는 서로 경쟁하고, Regional ISP 역시 서로 경쟁합니다.

동시에, 경쟁 관계에 있는 ISP들도 전 세계 **고객들에게 연결성을 제공하기 위해 상호 협력**해야 합니다. 
ISP들은 고객 수나 지리적 위치에 따라 다양한 상호 연결 전략을 사용합니다.

ISP들은 다음과 같은 추가적인 상호 연결 옵션을 사용합니다.

- **PoP (Point of Presence)**: ISP 네트워크 내에 위치한 하나 이상의 라우터로, 고객 네트워크가 해당 ISP에 접속할 때 사용합니다.
- **Multihoming**: 한 ISP가 여러 제공자 네트워크에 동시에 연결되어 보다 안정적인 연결성을 확보하는 방식입니다.
- **Peering**: 두 ISP가 별도의 비용 없이 서로의 네트워크에 직접 트래픽을 전달하기 위해 합의하는 관계입니다.

## Autonomous System (AS)
각 ISP나 CDN은 하나 이상의 Autonomous System (AS)로 운영됩니다.

AS는 **동일한 관리 권한 하에 운영되는 라우터와 그 링크의 집합**입니다.

각 AS는 자체 정책을 수립하고, 트래픽 엔지니어링 결정 및 상호 연결 전략을 구현하며, 네트워크 내/외부의 트래픽 경로를 관리합니다.

라우팅 프로토콜엔 **BGP**(외부 라우팅, Border Gateway Protocol)와 **IGP**(내부 라우팅, Internal Gateway Protocol)이 있는데 IGP에 관한 내용은 Intradomain routing algorithm 포스트에서 확인하실 수 있습니다.

### AS 간 비즈니스 관계
AS 간에는 주로 두 가지 비즈니스 관계가 존재합니다.

1. **Provider-Customer 관계 (Transit)**

    **고객 AS는 제공자 AS에게 비용을 지불**하고, 제공자 AS는 고객 AS의 트래픽을 자신의 라우팅 테이블에 포함된 목적지로 전달합니다.
    
2. **Peering 관계**

    **두 AS가 서로의 고객에게 트래픽을 전달할 때 비용 없이 직접 연결**합니다.
    피어링 관계는 트래픽이 크게 비대칭적이지 않은 경우에 형성되며, 규모가 비슷한 경우 (특히 Tier-1 간) 혹은 소규모 ISP끼리 비용 절감을 위해 이루어집니다.

또한, 제공자 AS는 고객의 트래픽 양, 즉 연결 대역폭을 기반으로 과금 방법이 달라질 수 있습니다:

- **고정 가격 방식**: 미리 정해진 범위 내의 대역폭 사용 시 일정 비용을 청구합니다.
- **실제 사용량 기반 방식**: 주기적인 측정을 통해 95th percentile을 기준으로 비용을 산정합니다.
    
어떤 경우에는 라우팅 정책이 고객 트래픽의 양을 늘려 제공자의 수익을 극대화하기 위해 설계되기도 합니다.

## BGP Routing 정책
BGP에서 한 AS가 어떤 경로를 외부에 광고(Export)하고, 어떤 경로를 수신(Import)할지는 중요한 결정입니다.

### 경로 광고(Export)
- **고객으로부터 학습한 경로**
    
    고객 AS로부터 받은 경로는 **가능한 한 많은 이웃 AS에 광고**해서 고객 트래픽이 더 많이 유입되도록 합니다.

- **제공자 또는 피어로부터 학습한 경로**

    이 경우, 해당 경로는 비용 문제가 있기 때문에 일반적으로 **고객에게만 광고**하고 다른 제공자나 피어에게는 광고하지 않습니다.

### 경로 수신(Import)
여러 AS로부터 동일 목적지에 대한 경로를 수신할 경우, 우선순위는 보통 다음과 같이 결정됩니다:
1. 고객 경로
2. 피어 경로
3. 제공자 경로

이런 우선순위는 **불필요하게 다른 AS를 경유하지 않도록** 하여 비용을 최소화 하는 것이 목적입니다.

### 기본 개념
#### BGP 세션
BGP 세션은 **두 라우터(피어)가 TCP 연결을 통해 반영구적으로 유지하면서 라우팅 정보를 교환하는 연결**입니다.

**eBGP(External BGP)** 는 서로 다른 AS 간의 border router들이 설정하는 세션이고, **iBGP(Internal BGP)** 는 동일한 AS 내에서 내부 라우터들 간에 설정하는 세션입니다.

#### BGP 메시지
BGP 세션이 수립되면 다음과 같은 메시지가 교환됩니다:

- **UPDATE** 메시지
    
    **Announcement**: 새로운 경로 또는 기존 경로 업데이트를 광고
    
    **Withdrawal**: 이전에 광고한 경로가 더 이상 유효하지 않을 때 전송
    
- **KEEPALIVE** 메시지
    
    세션 유지를 위해 주기적으로 교환

#### 경로 속성
- **AS-PATH**: 경로가 거쳐온 AS 번호들의 목록으로, 루프를 방지하고 최단 경로를 선택하는 데 사용됩니다.
- **NEXT-HOP**: 목적지까지의 다음 홉 라우터의 IP 주소를 나타내며, 내부 라우터는 이를 사용해 최종 목적지로 트래픽을 전달합니다.

### BGP 결정 과정
라우터가 동일한 목적지에 대해 여러 경로를 수신할 경우, BGP는 여러 속성을 기준으로 최적의 경로를 선택합니다.

- **LocalPref (Local Preference)**

    **같은 AS 내에서 외부 경로를 선택할 때** 어떤 경로를 우선 사용할지를 결정합니다.
    
    예를 들어, 특정 AS로부터 학습한 경로에 **높은 LocalPref 값을 부여하면 그 경로가 우선 선택**되어 트래픽의 출구 지점으로 사용됩니다.
    
- **MED (Multi-Exit Discriminator)**

    여러 연결 지점이 존재할 때, **인바운드 트래픽이 어느 링크를 통해 들어올지 결정**하는데 사용됩니다.
    
    **낮은 MED 값을 가진 링크가 선호**되며 이는 AS 간의 여러 연결 상황에서 인바운드 경로를 조정하는 데 도움을 줍니다.
    
이 외에도 각 AS는 자체 정책과 비즈니스 관계에 따라 경로의 광고 및 수신을 제어합니다.

## IXP와 피어링
IXP는 **여러 AS가 물리적 인프라를 통해 서로 연결되어 트래픽을 교환**할 수 있도록 지원해줍니다.
대규모 IXP일 경우, 수만 개의 피어링 링크가 존재하며 일일 트래픽 양은 글로벌 Tier-1 ISP 수준에 필적할 정도입니다.

IXP는 DDoS 공격 완화 역할도 수행하며 여러 연구와 실제 운영에서 중요한 역할을 하고 있습니다.


### 피어링 방법
1. 각 AS는 공개 AS 번호(ASN)을 보유해야 하며 IXP 시설에 라우터를 배치하여 IXP 스위치에 연결합니다.
2. BGP를 실행할 수 있어야 하며 IXP의 약관 (GTC)에 동의해야 합니다.
3. 비용 측면에서는 초기 회선 구축 비용, 월별 포트 사용 요금, 경우에 따라 연회비 등이 발생할 수 있으나 실제 트래픽 교환은 대체로 정산 없이 (settlement-free) 이루어집니다.

### 제공 서비스
- **Public peering**: IXP 인프라를 통해 다수의 AS와 비용 부담 없이 트래픽을 교환하는 서비스
    
- **Private peering**: 두 AS 간 전용 회선을 통한 트래픽 교환
    
- **Route server**: 다수의 AS 간 피어링 세션을 중앙에서 관리하여 BGP 세션 수를 줄이고 multilateral peering 지원
    
- **Remote peering**: 물리적으로 IXP에 직접 참여하지 않더라도 제3자를 통해 IXP에 접속하는 방식

### 검증
BGP는 복잡하고 다양한 라우터 제조사의 설정 언어에 따라 달라지기 때문에 오작동이나 Misconfiguration이 발생할 수 있습니다.

이 때, BGP가 올바르게 동작하는지는 **경로 가시성(path visibility)** 과 **경로 유효성(route validity)** 으로 평가할 수 있습니다.

Path visibility는 **목적지까지의 경로가 네트워크 내에서 올바르게 전파되는 지**를 확인하는 것이고, Route validity는 **목적지로 트래픽이 실제 도달하는 지**를 확인하는 것입니다.

이를 사전에 점검하기 위해 RCC(Router Configuration Checker)와 같은 도구가 사용되며, 정적 분석을 통해 구성 오류를 사전에 탐지할 수 있습니다.

7:["slug","computer-networks/AS-and-interdomain-routing-algorithm","c"]
0:["e65pahkFRyH71_Siijnq_",[[["",{"children":["blog",{"children":[["slug","computer-networks/AS-and-interdomain-routing-algorithm","c"],{"children":["__PAGE__?{\"slug\":[\"computer-networks\",\"AS-and-interdomain-routing-algorithm\"]}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["blog",{"children":[["slug","computer-networks/AS-and-interdomain-routing-algorithm","c"],{"children":["__PAGE__",{},[["$L1",["$","$2",null,{"fallback":null,"children":["$","$L3",null,{"reason":"next/dynamic","children":["$","$L4",null,{"post":{"slug":"computer-networks/AS-and-interdomain-routing-algorithm","categorySlug":"computer-networks","title":{"ko":"AS와 인터도메인 라우팅 알고리즘","en":"AS and Interdomain Algorithm"},"date":"2025-02-24 21:18","category":{"ko":"컴퓨터 네트워크","en":"Computer Networks"},"description":{"ko":"AS와 인터도메인 라우팅에 대해 알아봅시다","en":"Autonomous System and Interdomain Algorithm"},"content":"$5"}}]}]}],null],null],null]},[null,["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","$7","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L8",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[[null,["$","$L9",null,{"children":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L8",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}],"params":{}}]],null],null]},[[[["$","link","0",{"rel":"stylesheet","href":"/julie/_next/static/css/064e10fa6619f508.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/julie/_next/static/css/e680cef9016abb97.css","precedence":"next","crossOrigin":"$undefined"}]],["$","html",null,{"lang":"ko","suppressHydrationWarning":true,"children":["$","body",null,{"className":"__className_29e2ff","children":["$","$La",null,{"attribute":"class","defaultTheme":"system","enableSystem":true,"disableTransitionOnChange":true,"children":["$","$Lb",null,{"children":[["$","$Lc",null,{}],["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L8",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[]}]]}]}]}]}]],null],null],["$Ld",null]]]]
d:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Julie Lee's Portfolio"}],["$","meta","3",{"name":"description","content":"Welcome to Julie's portfolio page."}],["$","meta","4",{"name":"next-size-adjust"}]]
1:null
